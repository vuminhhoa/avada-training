{"version":3,"file":"productHandlers.js","names":["_productRepository","require","getProducts","ctx","products","getAllProducts","body","data","e","status","success","error","message","getProduct","id","params","getCurrentProduct","getOneProduct","Error","deleteProduct","removeProduct","updateProduct","save","postData","request","addProduct"],"sources":["../../../src/handlers/products/productHandlers.js"],"sourcesContent":["import {\r\n  getAll as getAllProducts,\r\n  getOne as getOneProduct,\r\n  add as addProduct,\r\n  remove as removeProduct,\r\n} from \"../../database/productRepository\";\r\n\r\n/**\r\n *\r\n * @param ctx\r\n * @returns {Promise<void>}\r\n */\r\nexport async function getProducts(ctx) {\r\n  try {\r\n    const products = getAllProducts();\r\n\r\n    ctx.body = {\r\n      data: products,\r\n    };\r\n  } catch (e) {\r\n    ctx.status = 404;\r\n    ctx.body = {\r\n      success: false,\r\n      data: [],\r\n      error: e.message,\r\n    };\r\n  }\r\n}\r\n\r\n/**\r\n *\r\n * @param ctx\r\n * @returns {Promise<{data: {author: string, name: string, id: number}}|{success: boolean, error: *}|{message: string, status: string}>}\r\n */\r\nexport async function getProduct(ctx) {\r\n  try {\r\n    const { id } = ctx.params;\r\n    const getCurrentProduct = getOneProduct(id);\r\n    if (getCurrentProduct) {\r\n      return (ctx.body = {\r\n        data: getCurrentProduct,\r\n      });\r\n    }\r\n\r\n    throw new Error(\"Product Not Found with that id!\");\r\n  } catch (e) {\r\n    ctx.status = 404;\r\n    return (ctx.body = {\r\n      success: false,\r\n      error: e.message,\r\n    });\r\n  }\r\n}\r\n\r\nexport async function deleteProduct(ctx) {\r\n  try {\r\n    const { id } = ctx.params;\r\n    const getCurrentProduct = getOneProduct(id);\r\n    if (getCurrentProduct) {\r\n      removeProduct(id);\r\n      return (ctx.body = {\r\n        success: true,\r\n      });\r\n    }\r\n\r\n    throw new Error(\"Product Not Found with that id!\");\r\n  } catch (e) {\r\n    ctx.status = 404;\r\n    return (ctx.body = {\r\n      success: false,\r\n      error: e.message,\r\n    });\r\n  }\r\n}\r\nexport async function updateProduct(ctx) {\r\n  try {\r\n    const { id } = ctx.params;\r\n    const { data } = ctx.body;\r\n    const getCurrentProduct = getOneProduct(id);\r\n    if (getCurrentProduct) {\r\n      removeProduct(id);\r\n      return (ctx.body = {\r\n        success: true,\r\n      });\r\n    }\r\n\r\n    throw new Error(\"Product Not Found with that id!\");\r\n  } catch (e) {\r\n    ctx.status = 404;\r\n    return (ctx.body = {\r\n      success: false,\r\n      error: e.message,\r\n    });\r\n  }\r\n}\r\n\r\n/**\r\n *\r\n * @param ctx\r\n * @returns {Promise<{success: boolean, error: *}|{success: boolean}>}\r\n */\r\nexport async function save(ctx) {\r\n  try {\r\n    const postData = ctx.request.body;\r\n    addProduct(postData);\r\n\r\n    ctx.status = 201;\r\n    return (ctx.body = {\r\n      success: true,\r\n    });\r\n  } catch (e) {\r\n    return (ctx.body = {\r\n      success: false,\r\n      error: e.message,\r\n    });\r\n  }\r\n}\r\n"],"mappings":"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"}