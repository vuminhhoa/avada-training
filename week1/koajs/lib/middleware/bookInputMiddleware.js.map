{"version":3,"file":"bookInputMiddleware.js","names":["yup","require","bookInputMiddleware","ctx","next","postData","request","body","schema","object","shape","id","number","positive","integer","required","name","string","author","validate","e","status","success","errors","errorName"],"sources":["../../src/middleware/bookInputMiddleware.js"],"sourcesContent":["const yup = require('yup');\r\n\r\nexport default async function bookInputMiddleware(ctx, next) {\r\n  try {\r\n    const postData = ctx.request.body;\r\n    let schema = yup.object().shape({\r\n      id: yup.number().positive().integer().required(),\r\n      name: yup.string().required(),\r\n      author: yup.string().required()\r\n    });\r\n\r\n    await schema.validate(postData);\r\n    next();\r\n  } catch (e) {\r\n    ctx.status = 400;\r\n    ctx.body = {\r\n      success: false,\r\n      errors: e.errors,\r\n      errorName: e.name\r\n    }\r\n  }\r\n}\r\n\r\n"],"mappings":";;;;;;AAAA,MAAMA,GAAG,GAAGC,OAAO,CAAC,KAAK,CAAC;AAEX,eAAeC,mBAAmBA,CAACC,GAAG,EAAEC,IAAI,EAAE;EAC3D,IAAI;IACF,MAAMC,QAAQ,GAAGF,GAAG,CAACG,OAAO,CAACC,IAAI;IACjC,IAAIC,MAAM,GAAGR,GAAG,CAACS,MAAM,CAAC,CAAC,CAACC,KAAK,CAAC;MAC9BC,EAAE,EAAEX,GAAG,CAACY,MAAM,CAAC,CAAC,CAACC,QAAQ,CAAC,CAAC,CAACC,OAAO,CAAC,CAAC,CAACC,QAAQ,CAAC,CAAC;MAChDC,IAAI,EAAEhB,GAAG,CAACiB,MAAM,CAAC,CAAC,CAACF,QAAQ,CAAC,CAAC;MAC7BG,MAAM,EAAElB,GAAG,CAACiB,MAAM,CAAC,CAAC,CAACF,QAAQ,CAAC;IAChC,CAAC,CAAC;IAEF,MAAMP,MAAM,CAACW,QAAQ,CAACd,QAAQ,CAAC;IAC/BD,IAAI,CAAC,CAAC;EACR,CAAC,CAAC,OAAOgB,CAAC,EAAE;IACVjB,GAAG,CAACkB,MAAM,GAAG,GAAG;IAChBlB,GAAG,CAACI,IAAI,GAAG;MACTe,OAAO,EAAE,KAAK;MACdC,MAAM,EAAEH,CAAC,CAACG,MAAM;MAChBC,SAAS,EAAEJ,CAAC,CAACJ;IACf,CAAC;EACH;AACF"}