{"version":3,"file":"bookHandlers.js","names":["_bookRepository","require","getBooks","ctx","books","getAllBooks","body","data","e","status","success","error","message","getBook","id","params","getCurrentBook","getOneBook","Error","save","postData","request","addBook"],"sources":["../../../src/handlers/books/bookHandlers.js"],"sourcesContent":["import {\r\n  getAll as getAllBooks,\r\n  getOne as getOneBook,\r\n  add as addBook\r\n} from \"../../database/bookRepository\";\r\n\r\n/**\r\n *\r\n * @param ctx\r\n * @returns {Promise<void>}\r\n */\r\nexport async function getBooks(ctx) {\r\n  try {\r\n    const books = getAllBooks();\r\n\r\n    ctx.body = {\r\n      data: books\r\n    };\r\n  } catch (e) {\r\n    ctx.status = 404;\r\n    ctx.body = {\r\n      success: false,\r\n      data: [],\r\n      error: e.message\r\n    };\r\n  }\r\n}\r\n\r\n/**\r\n *\r\n * @param ctx\r\n * @returns {Promise<{data: {author: string, name: string, id: number}}|{success: boolean, error: *}|{message: string, status: string}>}\r\n */\r\nexport async function getBook(ctx) {\r\n  try {\r\n    const {id} = ctx.params;\r\n    const getCurrentBook = getOneBook(id);\r\n    if (getCurrentBook) {\r\n      return ctx.body = {\r\n        data: getCurrentBook\r\n      }\r\n    }\r\n\r\n    throw new Error('Book Not Found with that id!')\r\n  } catch (e) {\r\n    ctx.status = 404;\r\n    return ctx.body = {\r\n      success: false,\r\n      error: e.message\r\n    }\r\n  }\r\n}\r\n\r\n/**\r\n *\r\n * @param ctx\r\n * @returns {Promise<{success: boolean, error: *}|{success: boolean}>}\r\n */\r\nexport async function save(ctx) {\r\n  try {\r\n    const postData = ctx.request.body;\r\n    addBook(postData);\r\n\r\n    ctx.status = 201;\r\n    return ctx.body = {\r\n      success: true\r\n    }\r\n  } catch (e) {\r\n    return ctx.body = {\r\n      success: false,\r\n      error: e.message\r\n    }\r\n  }\r\n}\r\n"],"mappings":";;;;;;;;AAAA,IAAAA,eAAA,GAAAC,OAAA;AAMA;AACA;AACA;AACA;AACA;AACO,eAAeC,QAAQA,CAACC,GAAG,EAAE;EAClC,IAAI;IACF,MAAMC,KAAK,GAAG,IAAAC,sBAAW,EAAC,CAAC;IAE3BF,GAAG,CAACG,IAAI,GAAG;MACTC,IAAI,EAAEH;IACR,CAAC;EACH,CAAC,CAAC,OAAOI,CAAC,EAAE;IACVL,GAAG,CAACM,MAAM,GAAG,GAAG;IAChBN,GAAG,CAACG,IAAI,GAAG;MACTI,OAAO,EAAE,KAAK;MACdH,IAAI,EAAE,EAAE;MACRI,KAAK,EAAEH,CAAC,CAACI;IACX,CAAC;EACH;AACF;;AAEA;AACA;AACA;AACA;AACA;AACO,eAAeC,OAAOA,CAACV,GAAG,EAAE;EACjC,IAAI;IACF,MAAM;MAACW;IAAE,CAAC,GAAGX,GAAG,CAACY,MAAM;IACvB,MAAMC,cAAc,GAAG,IAAAC,sBAAU,EAACH,EAAE,CAAC;IACrC,IAAIE,cAAc,EAAE;MAClB,OAAOb,GAAG,CAACG,IAAI,GAAG;QAChBC,IAAI,EAAES;MACR,CAAC;IACH;IAEA,MAAM,IAAIE,KAAK,CAAC,8BAA8B,CAAC;EACjD,CAAC,CAAC,OAAOV,CAAC,EAAE;IACVL,GAAG,CAACM,MAAM,GAAG,GAAG;IAChB,OAAON,GAAG,CAACG,IAAI,GAAG;MAChBI,OAAO,EAAE,KAAK;MACdC,KAAK,EAAEH,CAAC,CAACI;IACX,CAAC;EACH;AACF;;AAEA;AACA;AACA;AACA;AACA;AACO,eAAeO,IAAIA,CAAChB,GAAG,EAAE;EAC9B,IAAI;IACF,MAAMiB,QAAQ,GAAGjB,GAAG,CAACkB,OAAO,CAACf,IAAI;IACjC,IAAAgB,mBAAO,EAACF,QAAQ,CAAC;IAEjBjB,GAAG,CAACM,MAAM,GAAG,GAAG;IAChB,OAAON,GAAG,CAACG,IAAI,GAAG;MAChBI,OAAO,EAAE;IACX,CAAC;EACH,CAAC,CAAC,OAAOF,CAAC,EAAE;IACV,OAAOL,GAAG,CAACG,IAAI,GAAG;MAChBI,OAAO,EAAE,KAAK;MACdC,KAAK,EAAEH,CAAC,CAACI;IACX,CAAC;EACH;AACF"}